{% extends "base.html" %}

{% block content %}

<h1>Markets</h1>
<form role="search">
    <input name="search" type="search" placeholder="Search" />
    <input type="submit" value="Search" />
</form>


<details>
    <summary role="button" class="outline secondary">Filters</summary>
    <fieldset>
        <legend>Sort by</legend>
        <label>
            <input type="radio" name="language" checked />
            Volume
        </label>
        <label>
            <input type="radio" name="language" />
            Newest
        </label>
        <label>
            <input type="radio" name="language" />
            Volatility
        </label>
    </fieldset>
</details>

{% for (market, books) in markets %}

<article>
    <h3><a href="/markets/{{market.slug}}">{{market.title}}</a></h3>
    <table>
        <tbody>
            {% for book in books %}
            <tr>
                <td>{{book.title}}</td>
                <td style="display: flex; justify-content: flex-end">
                    {% match book.last_trade_price %}
                    {% when Some with (val) %}
                    <kbd>{{val / 100}}.{{"{:0>2}"|format(val % 100)}}Â¢</kbd>&nbsp;
                    {% when None %}
                    <kbd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd>
                    {% endmatch %}
                </td>
            </tr>
            {% endfor %}
    </table>
</article>

{% endfor %}

{% endblock %}