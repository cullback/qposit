{% extends "base.html" %}

{% block content %}


<h1>{{market.title}}</h1>

Closes Nov 5, 2024

<hr>

{% for (book, orderbook) in books.iter().zip(orderbooks) %}

<article>
    <details>
        <summary>
            <div class="grid">
                <strong>{{book.title}}</strong>
                <div style="display: flex; justify-content: flex-end">
                    <kbd>{{book.last_trade_price.unwrap_or(0)}}</kbd>&nbsp;<kbd
                        class="pico-background-green-350">&nbsp;+1.56%</kbd>
                </div>
            </div>
            <small>$7,669,592 Bet</small>
        </summary>

        <p>Order book</p>
        <table>
            <thead>
                <tr>
                    <th scope="col">Price</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Total</th>
                </tr>
            </thead>
            <tbody>
                {% for (price, quantity, value) in orderbook.asks.iter() %}
                <tr>
                    <td class="pico-color-red-350">{{price}}¢</td>
                    <td>{{quantity}}</td>
                    <td>${{value}}</td>
                </tr>
                {% endfor %}
                {% for (price, quantity, value) in orderbook.bids %}
                <tr>
                    <td class="pico-color-green-350">{{price}}¢</td>
                    <td>{{quantity}}</td>
                    <td>${{value}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <form>
            <fieldset>
                <div>
                    <legend>Order type</legend>
                    <label><input type="radio" name="order_type" value="Market" />Market</label>
                    <label><input type="radio" name="order_type" value="GTC" checked />GTC</label>
                    <label><input type="radio" name="order_type" value="IOC" />IOC</label>
                    <label><input type="radio" name="order_type" value="POST" />POST</label>
                </div>
                <div class="grid">
                    <label>Quantity
                        <input type="number" name="quantity" placeholder="Quantity" aria-label="Number" />
                    </label>
                    <label>Price
                        <input type="number" name="price" placeholder="Price" aria-label="Number" />
                    </label>
                </div>
                <div class="grid">
                    <input type="submit" value="Buy" hx-vals='{"is_buy":true,"book":{{book.id}}}' hx-swap="innerHTML"
                        hx-target="#responseContainer" hx-post="/orders" class="pico-background-green-450">
                    <input type="submit" value="Sell" hx-vals='{"is_buy":false,"book":{{book.id}}}' hx-swap="innerHTML"
                        hx-target="#responseContainer" hx-post="/orders" class="pico-background-red-450">
                </div>
            </fieldset>
        </form>
        <div id="responseContainer"></div>
    </details>
</article>

{% endfor %}

{{market.description|markdown}}

{% endblock %}